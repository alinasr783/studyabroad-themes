-- WARNING: This schema is for context only and is not meant to be run.
-- Table order and constraints may not be valid for execution.

CREATE TABLE public.admins (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  email text NOT NULL UNIQUE,
  password text NOT NULL,
  full_name text,
  is_active boolean DEFAULT true,
  last_login timestamp with time zone,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  client_id uuid,
  CONSTRAINT admins_pkey PRIMARY KEY (id),
  CONSTRAINT fk_admins_client FOREIGN KEY (client_id) REFERENCES public.clients(id)
);
CREATE TABLE public.articles (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  title_ar text NOT NULL,
  title_en text NOT NULL,
  slug text NOT NULL UNIQUE,
  excerpt_ar text,
  excerpt_en text,
  content_ar text,
  content_en text,
  author_name text,
  author_avatar text,
  featured_image text,
  category text,
  tags ARRAY,
  is_published boolean DEFAULT false,
  is_featured boolean DEFAULT false,
  views_count integer DEFAULT 0,
  reading_time integer,
  created_at timestamp with time zone DEFAULT now(),
  client_id uuid,
  CONSTRAINT articles_pkey PRIMARY KEY (id),
  CONSTRAINT fk_articles_client FOREIGN KEY (client_id) REFERENCES public.clients(id)
);
CREATE TABLE public.clients (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  name text NOT NULL,
  email text UNIQUE,
  phone text,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  domain text,
  client_name text,
  description text,
  is_active boolean DEFAULT true,
  logo_url text,
  CONSTRAINT clients_pkey PRIMARY KEY (id)
);
CREATE TABLE public.consultations (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  full_name text NOT NULL,
  email text NOT NULL,
  phone text,
  country_preference text,
  study_level text,
  field_of_interest text,
  budget_range text,
  preferred_date date,
  preferred_time time without time zone,
  message text,
  client_id uuid,
  status text DEFAULT 'pending'::text,
  created_at timestamp with time zone DEFAULT now(),
  CONSTRAINT consultations_pkey PRIMARY KEY (id)
);
CREATE TABLE public.contact_info (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  title text,
  description text,
  phone_numbers ARRAY,
  email_addresses ARRAY,
  address text,
  working_hours text,
  whatsapp_title text,
  whatsapp_description text,
  whatsapp_number text,
  map_placeholder text,
  map_link text,
  social_links jsonb DEFAULT '{"tiktok": "", "twitter": "", "youtube": "", "facebook": "", "linkedin": "", "snapchat": "", "instagram": ""}'::jsonb,
  newsletter_title text DEFAULT 'النشرة الإخبارية'::text,
  newsletter_description text DEFAULT 'اشترك في نشرتنا البريدية لتصلك آخر العروض والأخبار'::text,
  client_id uuid,
  CONSTRAINT contact_info_pkey PRIMARY KEY (id),
  CONSTRAINT contact_info_client_id_fkey FOREIGN KEY (client_id) REFERENCES public.clients(id)
);
CREATE TABLE public.contact_messages (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  full_name text NOT NULL,
  email text NOT NULL,
  phone text,
  subject text NOT NULL,
  message text NOT NULL,
  created_at timestamp with time zone DEFAULT now(),
  client_id uuid,
  CONSTRAINT contact_messages_pkey PRIMARY KEY (id)
);
CREATE TABLE public.countries (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  name_ar text NOT NULL,
  name_en text NOT NULL,
  slug text NOT NULL UNIQUE,
  flag_url text,
  capital text,
  is_featured boolean DEFAULT false,
  description_ar text,
  description_en text,
  study_cost_min integer,
  study_cost_max integer,
  living_cost_min integer,
  living_cost_max integer,
  language text,
  climate text,
  currency text,
  visa_requirements_ar text,
  visa_requirements_en text,
  popular_cities ARRAY,
  image_url text,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  is_trending boolean DEFAULT false,
  is_home boolean DEFAULT false,
  client_id uuid,
  CONSTRAINT countries_pkey PRIMARY KEY (id),
  CONSTRAINT fk_countries_client FOREIGN KEY (client_id) REFERENCES public.clients(id)
);
CREATE TABLE public.destinations (
  id text NOT NULL,
  name text NOT NULL,
  flag text,
  description text,
  image_url text,
  is_trending boolean DEFAULT false,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  CONSTRAINT destinations_pkey PRIMARY KEY (id)
);
CREATE TABLE public.managers (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  email text NOT NULL UNIQUE,
  password text NOT NULL,
  name text,
  created_at timestamp with time zone DEFAULT timezone('utc'::text, now()),
  client_id uuid,
  is_super_admin boolean DEFAULT false,
  CONSTRAINT managers_pkey PRIMARY KEY (id),
  CONSTRAINT managers_client_id_fkey FOREIGN KEY (client_id) REFERENCES public.clients(id)
);
CREATE TABLE public.newsletter_subscribers (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  email text NOT NULL UNIQUE,
  subscribed_at timestamp with time zone DEFAULT now(),
  is_active boolean DEFAULT true,
  CONSTRAINT newsletter_subscribers_pkey PRIMARY KEY (id)
);
CREATE TABLE public.program_media (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  program_id uuid NOT NULL,
  media_type text NOT NULL CHECK (media_type = ANY (ARRAY['image'::text, 'video'::text])),
  url text NOT NULL,
  caption_ar text,
  caption_en text,
  is_featured boolean DEFAULT false,
  display_order integer DEFAULT 0,
  created_at timestamp with time zone DEFAULT now(),
  CONSTRAINT program_media_pkey PRIMARY KEY (id),
  CONSTRAINT program_media_program_id_fkey FOREIGN KEY (program_id) REFERENCES public.programs(id)
);
CREATE TABLE public.programs (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  name_ar text NOT NULL,
  name_en text NOT NULL,
  slug text NOT NULL UNIQUE,
  description_ar text,
  degree_level text,
  field_of_study text,
  duration_years integer,
  tuition_fee numeric,
  language text,
  start_date date,
  application_deadline date,
  requirements_ar text,
  career_prospects_ar text,
  is_featured boolean DEFAULT false,
  university_id uuid,
  example_column text,
  description_en text,
  created_at timestamp with time zone DEFAULT now(),
  program_type text,
  study_mode text,
  credit_hours integer,
  scholarship_info_ar text,
  scholarship_info_en text,
  video_url text,
  preparation_fee numeric,
  client_id uuid,
  career_prospects_en text,
  country_id uuid,
  duration_months integer,
  requirements_en text,
  CONSTRAINT programs_pkey PRIMARY KEY (id),
  CONSTRAINT programs_country_id_fkey FOREIGN KEY (country_id) REFERENCES public.countries(id),
  CONSTRAINT fk_programs_client FOREIGN KEY (client_id) REFERENCES public.clients(id)
);
CREATE TABLE public.site_sections (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  section_key text NOT NULL UNIQUE,
  content jsonb NOT NULL,
  created_at timestamp without time zone DEFAULT now(),
  CONSTRAINT site_sections_pkey PRIMARY KEY (id)
);
CREATE TABLE public.site_settings (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  client_id uuid,
  site_name_ar text,
  site_name_en text,
  logo_url text,
  primary_color_1 text,
  primary_color_2 text,
  primary_color_3 text,
  show_countries_section boolean DEFAULT true,
  show_universities_section boolean DEFAULT true,
  show_programs_section boolean DEFAULT true,
  show_articles_section boolean DEFAULT true,
  show_testimonials_section boolean DEFAULT true,
  created_at timestamp with time zone DEFAULT timezone('utc'::text, now()),
  tagline_ar text,
  tagline_en text,
  logo_animation text,
  CONSTRAINT site_settings_pkey PRIMARY KEY (id)
);
CREATE TABLE public.study_destinations (
  id text NOT NULL,
  name text NOT NULL,
  flag_emoji text,
  description_ar text,
  image_url text,
  continent text,
  cost_level text,
  popular_fields ARRAY,
  is_featured boolean DEFAULT false,
  CONSTRAINT study_destinations_pkey PRIMARY KEY (id)
);
CREATE TABLE public.testimonials (
  id integer NOT NULL DEFAULT nextval('testimonials_id_seq'::regclass),
  name text NOT NULL,
  university text NOT NULL,
  country text NOT NULL,
  flag_emoji text,
  program text NOT NULL,
  rating integer NOT NULL CHECK (rating >= 1 AND rating <= 5),
  content text NOT NULL,
  year text,
  is_active boolean DEFAULT true,
  is_featured boolean DEFAULT false,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  client_id uuid,
  CONSTRAINT testimonials_pkey PRIMARY KEY (id)
);
CREATE TABLE public.universities (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  name_ar text NOT NULL,
  name_en text NOT NULL,
  slug text NOT NULL UNIQUE,
  description_ar text,
  logo_url text,
  image_url text,
  city text,
  website_url text,
  world_ranking integer,
  tuition_fee_min integer,
  tuition_fee_max integer,
  student_count integer,
  acceptance_rate numeric,
  international_students_percentage numeric,
  language_requirements text,
  application_deadline date,
  is_featured boolean DEFAULT false,
  country_id uuid,
  accreditation text,
  founded_year integer,
  campus_type text,
  housing_available boolean DEFAULT false,
  scholarship_available boolean DEFAULT false,
  video_url text,
  description_en text,
  website text,
  housing_fee numeric,
  visa_fee numeric,
  residence_fee numeric,
  admission_fee numeric,
  procedures_fee numeric,
  commission_fee numeric,
  preparation_fee numeric,
  client_id uuid,
  created_at timestamp with time zone DEFAULT now(),
  CONSTRAINT universities_pkey PRIMARY KEY (id),
  CONSTRAINT fk_universities_client FOREIGN KEY (client_id) REFERENCES public.clients(id),
  CONSTRAINT fk_universities_country FOREIGN KEY (country_id) REFERENCES public.countries(id)
);
CREATE TABLE public.university_faculties (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  university_id uuid NOT NULL,
  name_ar text NOT NULL,
  name_en text NOT NULL,
  description_ar text,
  description_en text,
  logo_url text,
  created_at timestamp with time zone DEFAULT now(),
  client_id uuid,
  CONSTRAINT university_faculties_pkey PRIMARY KEY (id),
  CONSTRAINT university_faculties_university_id_fkey FOREIGN KEY (university_id) REFERENCES public.universities(id),
  CONSTRAINT university_faculties_client_id_fkey FOREIGN KEY (client_id) REFERENCES public.clients(id)
);
CREATE TABLE public.university_media (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  university_id uuid NOT NULL,
  media_type text NOT NULL CHECK (media_type = ANY (ARRAY['image'::text, 'video'::text])),
  url text NOT NULL,
  caption_ar text,
  caption_en text,
  is_featured boolean DEFAULT false,
  display_order integer DEFAULT 0,
  created_at timestamp with time zone DEFAULT now(),
  type text,
  client_id uuid,
  CONSTRAINT university_media_pkey PRIMARY KEY (id),
  CONSTRAINT university_media_university_id_fkey FOREIGN KEY (university_id) REFERENCES public.universities(id),
  CONSTRAINT university_media_client_id_fkey FOREIGN KEY (client_id) REFERENCES public.clients(id)
);
CREATE TABLE public.university_reviews (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  university_id uuid NOT NULL,
  student_name text NOT NULL,
  student_nationality text,
  program_name text,
  graduation_year integer,
  rating integer NOT NULL CHECK (rating >= 1 AND rating <= 5),
  review_text_ar text,
  review_text_en text,
  is_approved boolean DEFAULT false,
  created_at timestamp with time zone DEFAULT now(),
  client_id uuid,
  CONSTRAINT university_reviews_pkey PRIMARY KEY (id),
  CONSTRAINT university_reviews_university_id_fkey FOREIGN KEY (university_id) REFERENCES public.universities(id),
  CONSTRAINT university_reviews_client_id_fkey FOREIGN KEY (client_id) REFERENCES public.clients(id)
);